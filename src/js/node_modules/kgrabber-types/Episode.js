/**
 * @typedef {import("kgrabber-types/Status")} Status
 */

module.exports = class Episode {
	/**
	 * Creates a new Episode
	 * @param {Number} episodeNumber
	 * @param {String} kissLink
	 */
	constructor(episodeNumber, kissLink) {
		/**
		 * While usually a string, the type of this property depends on the the {@link Status#linkType}
		 * @type {Object}
		 */
		this.grabbedLink = "";
		/**
		 * @see grabbedLink
		 * @type {Object}
		 */
		this.processedLink = "";
		/**
		 * Value to be displayed for non-string data
		 */
		this.displayOverride = "";
		this.kissLink = kissLink;
		this.error = "";
		this.episodeNumber = episodeNumber;
		Object.seal(this);
	}

	get functionalLink() {
		return this.processedLink || this.grabbedLink;
	}

	get displayLink() {
		if (this.error) {
			return `error: ${this.error}`;
		}
		if (this.displayOverride) {
			return `{${this.displayOverride}}`;
		}
		return this.processedLink || this.grabbedLink;
	}
};
